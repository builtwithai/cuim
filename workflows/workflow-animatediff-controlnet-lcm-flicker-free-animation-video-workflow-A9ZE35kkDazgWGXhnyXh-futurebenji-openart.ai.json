{"last_node_id":171,"last_link_id":334,"nodes":[{"id":2,"type":"ADE_AnimateDiffUniformContextOptions","pos":[2778.3907478855917,-581.5964866292758],"size":{"0":315,"1":154},"flags":{},"order":0,"mode":0,"outputs":[{"name":"CONTEXT_OPTIONS","type":"CONTEXT_OPTIONS","links":[1],"shape":3}],"properties":{"Node name for S&R":"ADE_AnimateDiffUniformContextOptions"},"widgets_values":[16,1,4,"uniform",false]},{"id":1,"type":"ADE_AnimateDiffLoaderWithContext","pos":[2769.2706892918413,-823.166064973808],"size":{"0":315,"1":190},"flags":{},"order":43,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":334},{"name":"context_options","type":"CONTEXT_OPTIONS","link":1,"slot_index":1},{"name":"motion_lora","type":"MOTION_LORA","link":null,"slot_index":2},{"name":"motion_model_settings","type":"MOTION_MODEL_SETTINGS","link":null,"slot_index":3}],"outputs":[{"name":"MODEL","type":"MODEL","links":[169],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoaderWithContext"},"widgets_values":["v3_sd15_mm.ckpt","sqrt_linear (AnimateDiff)",1,false]},{"id":11,"type":"CLIPTextEncode","pos":[6.913017259999347,1022.4317806068418],"size":{"0":400,"1":200},"flags":{},"order":29,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":75,"slot_index":0}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[8],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["(nsfw) , (worst quality, low quality, illustration, 3d, 2d, painting, cartoons, sketch), open mouth\n"]},{"id":69,"type":"IPAdapterModelLoader","pos":[-418.38990422788305,-1071.5011888805461],"size":{"0":387.9784851074219,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[138],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus_sd15.bin"]},{"id":125,"type":"PrepImageForClipVision","pos":[-375.38990422788305,-960.5011888805475],"size":{"0":315,"1":106},"flags":{},"order":22,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":243}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[244],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PrepImageForClipVision"},"widgets_values":["LANCZOS","pad",0]},{"id":93,"type":"ToBasicPipe","pos":[1546.8235272427546,510.3256895292821],"size":{"0":241.79998779296875,"1":106},"flags":{},"order":49,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":171,"slot_index":0},{"name":"clip","type":"CLIP","link":196,"slot_index":1},{"name":"vae","type":"VAE","link":166,"slot_index":2},{"name":"positive","type":"CONDITIONING","link":182,"slot_index":3},{"name":"negative","type":"CONDITIONING","link":181,"slot_index":4}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[163],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ToBasicPipe"}},{"id":87,"type":"SAMLoader","pos":[1520.8235272427546,677.3256895292823],"size":{"0":315,"1":82},"flags":{},"order":2,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[148],"shape":3}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":86,"type":"UltralyticsDetectorProvider","pos":[1525.7571041177548,375.33644010545424],"size":{"0":315,"1":78},"flags":{},"order":3,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[147],"shape":3},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":84,"type":"SEGSPaste","pos":[1959.757104117754,388.33644010545424],"size":{"0":300,"1":122},"flags":{},"order":56,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":222},{"name":"segs","type":"SEGS","link":146},{"name":"ref_image_opt","type":"IMAGE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[219],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SEGSPaste"},"widgets_values":[5,255]},{"id":70,"type":"CLIPVisionLoader","pos":[-429.38990422788305,-1187.5011888805464],"size":{"0":405.2630615234375,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[136],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["SD1.5\\model.safetensors"]},{"id":50,"type":"ModelSamplingDiscrete","pos":[-566.624941160351,311.2696898015104],"size":{"0":315,"1":82},"flags":{},"order":27,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":79}],"outputs":[{"name":"MODEL","type":"MODEL","links":[144],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ModelSamplingDiscrete"},"widgets_values":["lcm",false]},{"id":24,"type":"ControlNetLoaderAdvanced","pos":[210.2222170072951,-1262.6591351795362],"size":{"0":434.10919189453125,"1":60.835391998291016},"flags":{},"order":5,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[28],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_lineart.pth"]},{"id":14,"type":"LineArtPreprocessor","pos":[281.22221700729494,-1144.6591351795362],"size":{"0":315,"1":82},"flags":{},"order":34,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":217}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[277,278],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LineArtPreprocessor"},"widgets_values":["disable",512]},{"id":12,"type":"ControlNetApplyAdvanced","pos":[270.22221700729494,-998.6591351795354],"size":{"0":308.47021484375,"1":166},"flags":{},"order":39,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":7},{"name":"negative","type":"CONDITIONING","link":8},{"name":"control_net","type":"CONTROL_NET","link":28,"slot_index":2},{"name":"image","type":"IMAGE","link":278}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[286],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[287],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.5,0,1]},{"id":48,"type":"LoraLoader","pos":[-605.7376427240297,121.39403564246119],"size":{"0":412.2048034667969,"1":126},"flags":{},"order":25,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":288},{"name":"clip","type":"CLIP","link":268}],"outputs":[{"name":"MODEL","type":"MODEL","links":[79],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[74,75],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["SD1-5\\lcm-lora-sdv1-5_lora_weights.safetensors",1,1]},{"id":73,"type":"ReActorFaceSwap","pos":[3044.9061334855637,227.08137580044345],"size":{"0":315,"1":338},"flags":{},"order":18,"mode":4,"inputs":[{"name":"input_image","type":"IMAGE","link":null},{"name":"source_image","type":"IMAGE","link":126,"slot_index":1},{"name":"face_model","type":"FACE_MODEL","link":null,"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[308],"shape":3,"slot_index":0},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","codeformer.pth",0.8,0.8,"no","no","0","0",1]},{"id":77,"type":"LoadImage","pos":[3001.9939339386883,634.3867504291068],"size":{"0":408.6856689453125,"1":532.485107421875},"flags":{},"order":6,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[126],"shape":3},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_bkoxn_00028_.png","image"]},{"id":156,"type":"VHS_VideoCombine","pos":[3485.327372126187,229.15622055410626],"size":[414.205810546875,270],"flags":{},"order":24,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":308},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"title":"Video Save - After Detailer","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"Animate_faceswap_","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":20,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"Animate_faceswap__00002.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}}},{"id":157,"type":"IPAdapterModelLoader","pos":[-28.343142369674553,-2105.0487994503737],"size":{"0":550.546875,"1":58},"flags":{},"order":7,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[309],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-faceid-plusv2_sd15.bin"],"color":"#233","bgcolor":"#355"},{"id":163,"type":"CLIPVisionLoader","pos":[-20.34314236967454,-1995.0487994503749],"size":{"0":535.9698486328125,"1":58},"flags":{},"order":8,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[310],"shape":3}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["CLIP-ViT-H-14-laion2B-s32B-b79K.safetensors"],"color":"#233","bgcolor":"#355"},{"id":162,"type":"PrepImageForInsightFace","pos":[-233.34314236967487,-1770.0487994503762],"size":{"0":315,"1":106},"flags":{},"order":21,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":318}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[312],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PrepImageForInsightFace"},"widgets_values":["center",0,true],"color":"#233","bgcolor":"#355"},{"id":90,"type":"VHS_VideoCombine","pos":[2388.5561199289177,223.05135861124953],"size":[424.4503479003906,270],"flags":{},"order":57,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":219},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"title":"Video Save - After Detailer","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"Animate_Detail_","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":20,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":true,"paused":true,"params":{"filename":"Animate_Detail__00007.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}}},{"id":54,"type":"PreviewImage","pos":[1128.0502815525895,-729],"size":{"0":568.8789672851562,"1":503.5118713378906},"flags":{},"order":37,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":186}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":52,"type":"ControlNetLoaderAdvanced","pos":[1146.0502815525895,-1285],"size":{"0":434.10919189453125,"1":60.835391998291016},"flags":{},"order":9,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[84],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_openpose.pth"]},{"id":97,"type":"DWPreprocessor","pos":[1219.0502815525895,-1171],"size":{"0":315,"1":178},"flags":{},"order":33,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":192}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[185,186],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_m.onnx","dw-ll_ucoco_384.onnx"]},{"id":18,"type":"VAEEncode","pos":[518,-58],"size":{"0":210,"1":46},"flags":{},"order":32,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":190},{"name":"vae","type":"VAE","link":24}],"outputs":[{"name":"LATENT","type":"LATENT","links":[21],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":26,"type":"PreviewImage","pos":[190,-768],"size":{"0":607.2425537109375,"1":521.8944702148438},"flags":{},"order":38,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":277}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":3,"type":"CheckpointLoaderSimpleWithNoiseSelect","pos":[-1204.7622812086515,40.801012986695135],"size":{"0":424.987548828125,"1":136.2106170654297},"flags":{},"order":10,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[288],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[194],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":[218],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimpleWithNoiseSelect"},"widgets_values":["SD1_5\\realisticVisionV60B1_v60B1VAE.safetensors","sqrt_linear (AnimateDiff)"]},{"id":99,"type":"CLIPSetLastLayer","pos":[-1199.7622812086515,267.8010129866952],"size":{"0":394.4574890136719,"1":58.90501403808594},"flags":{},"order":19,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":194}],"outputs":[{"name":"CLIP","type":"CLIP","links":[196,268],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-2]},{"id":17,"type":"KSampler","pos":[658,112],"size":{"0":315,"1":262},"flags":{},"order":48,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":170},{"name":"positive","type":"CONDITIONING","link":176,"slot_index":1},{"name":"negative","type":"CONDITIONING","link":178},{"name":"latent_image","type":"LATENT","link":21}],"outputs":[{"name":"LATENT","type":"LATENT","links":[39],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[77777777777777,"fixed",20,7,"dpmpp_2m_sde_gpu","karras",0.5]},{"id":19,"type":"Reroute","pos":[131,-140],"size":[75,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":201,"slot_index":0}],"outputs":[{"name":"","type":"IMAGE","links":[190,192,217,326],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":53,"type":"ControlNetApplyAdvanced","pos":[1221.0502815525895,-945],"size":{"0":308.47021484375,"1":166},"flags":{},"order":42,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":286},{"name":"negative","type":"CONDITIONING","link":287},{"name":"control_net","type":"CONTROL_NET","link":84,"slot_index":2},{"name":"image","type":"IMAGE","link":185}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[328],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[329],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1]},{"id":88,"type":"Reroute","pos":[2541,-4],"size":[75,26],"flags":{},"order":51,"mode":0,"inputs":[{"name":"","type":"*","link":162}],"outputs":[{"name":"","type":"IMAGE","links":[214,304],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":94,"type":"Reroute","pos":[2833,-270],"size":[75,26],"flags":{},"order":45,"mode":0,"inputs":[{"name":"","type":"*","link":169}],"outputs":[{"name":"","type":"MODEL","links":[170,171],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":20,"type":"VAEDecode","pos":[1614,26],"size":{"0":210,"1":46},"flags":{},"order":50,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":39,"slot_index":0},{"name":"vae","type":"VAE","link":67,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[162],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":95,"type":"Reroute","pos":[1999,-165],"size":[75,26],"flags":{},"order":46,"mode":0,"inputs":[{"name":"","type":"*","link":331}],"outputs":[{"name":"","type":"CONDITIONING","links":[176,182],"slot_index":0}],"title":"Positive","properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":96,"type":"Reroute","pos":[2219,-95],"size":[75,26],"flags":{},"order":47,"mode":0,"inputs":[{"name":"","type":"*","link":332}],"outputs":[{"name":"","type":"CONDITIONING","links":[178,181],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#322","bgcolor":"#533"},{"id":169,"type":"ControlNetLoaderAdvanced","pos":[2021.4360836984374,-1266.7484514975004],"size":{"0":434.10919189453125,"1":60.835391998291016},"flags":{},"order":11,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[323],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11f1p_sd15_depth.pth"]},{"id":167,"type":"ControlNetApplyAdvanced","pos":[2065,-993],"size":{"0":308.47021484375,"1":166},"flags":{},"order":44,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":328},{"name":"negative","type":"CONDITIONING","link":329},{"name":"control_net","type":"CONTROL_NET","link":323,"slot_index":2},{"name":"image","type":"IMAGE","link":327}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[331],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[332],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.5,0,1]},{"id":171,"type":"Zoe-DepthMapPreprocessor","pos":[2063,-1130],"size":{"0":315,"1":58},"flags":{},"order":35,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":326}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[327,330],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Zoe-DepthMapPreprocessor"},"widgets_values":[512]},{"id":64,"type":"ttN text","pos":[-3.7476752430526643,151.9764682753757],"size":{"0":400,"1":200},"flags":{},"order":12,"mode":0,"outputs":[{"name":"text","type":"STRING","links":[107],"shape":3,"slot_index":0}],"title":"Pre_text","properties":{"Node name for S&R":"ttN text","ttNnodeVersion":"1.0.0"},"widgets_values":["portrait photo of American Football Players, (Male) , Strong Muscle Body , (cleavage:0.8), pale skin, (smile:1), cozy, natural skin, (cinematic lighting), (cinematic, film grain:1.1)"]},{"id":8,"type":"BatchPromptSchedule","pos":[-1,416],"size":{"0":404.2124328613281,"1":555.6133422851562},"flags":{},"order":28,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":74,"slot_index":0},{"name":"pre_text","type":"STRING","link":107,"widget":{"name":"pre_text"},"slot_index":1},{"name":"max_frames","type":"INT","link":322,"widget":{"name":"max_frames"},"slot_index":2}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[7],"shape":3,"slot_index":0},{"name":"NEG","type":"CONDITIONING","links":null,"shape":3}],"properties":{"Node name for S&R":"BatchPromptSchedule"},"widgets_values":["\"0\" : \" (spot light focus to girl) \", \n\"100\" : \"  (spot light focus to girl) \"\n\n",700,false,"(Masterpiece, best quality:1.2), ultra realistic ,2 boxing figthers , wear cyberpunk style armor, cyberpunk style , ","0",0,0,0,0,0]},{"id":80,"type":"IPAdapterApply","pos":[-388.38990422788305,-790.5011888805475],"size":{"0":315,"1":258},"flags":{},"order":31,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":138},{"name":"clip_vision","type":"CLIP_VISION","link":136},{"name":"image","type":"IMAGE","link":244,"slot_index":2},{"name":"model","type":"MODEL","link":144},{"name":"attn_mask","type":"MASK","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[333],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApply"},"widgets_values":[1,0.5,"original",0,1,false]},{"id":160,"type":"LoraLoaderModelOnly","pos":[-392.34314236967504,-1586.0487994503762],"size":{"0":475.3240966796875,"1":82},"flags":{},"order":36,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":333}],"outputs":[{"name":"MODEL","type":"MODEL","links":[313],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["ip-adapter-faceid-plusv2_sd15_lora.safetensors",0.8],"color":"#233","bgcolor":"#355"},{"id":158,"type":"IPAdapterApplyFaceID","pos":[150.6568576303257,-1812.0487994503762],"size":{"0":369.23284912109375,"1":332.9832458496094},"flags":{},"order":41,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":309},{"name":"clip_vision","type":"CLIP_VISION","link":310,"slot_index":1},{"name":"insightface","type":"INSIGHTFACE","link":311,"slot_index":2},{"name":"image","type":"IMAGE","link":312},{"name":"model","type":"MODEL","link":313},{"name":"attn_mask","type":"MASK","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[334],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApplyFaceID"},"widgets_values":[1,0.01,"original",0,1,true,0.1,false],"color":"#233","bgcolor":"#355"},{"id":149,"type":"LoadImage","pos":[-1074.2015383531962,-2105.407704936501],"size":{"0":547.5203857421875,"1":654.7737426757812},"flags":{},"order":13,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[318],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00158_.png","image"],"color":"#323","bgcolor":"#535"},{"id":161,"type":"InsightFaceLoader","pos":[-239.34314236967492,-1880.0487994503762],"size":{"0":315,"1":58},"flags":{"pinned":false},"order":14,"mode":0,"outputs":[{"name":"INSIGHTFACE","type":"INSIGHTFACE","links":[311],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"InsightFaceLoader"},"widgets_values":["CUDA"],"color":"#233","bgcolor":"#355"},{"id":112,"type":"ImageCASharpening+","pos":[1539,231],"size":{"0":310.79998779296875,"1":58},"flags":{},"order":52,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":214}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[222,223,224],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageCASharpening+"},"widgets_values":[0.3],"color":"#2a363b","bgcolor":"#3f5159"},{"id":85,"type":"ImpactSimpleDetectorSEGS_for_AD","pos":[1548.5561199289184,815.0513586112493],"size":{"0":319.20001220703125,"1":334},"flags":{},"order":54,"mode":0,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":147,"slot_index":0},{"name":"image_frames","type":"IMAGE","link":224},{"name":"sam_model_opt","type":"SAM_MODEL","link":148,"slot_index":2},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null}],"outputs":[{"name":"SEGS","type":"SEGS","links":[145],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactSimpleDetectorSEGS_for_AD"},"widgets_values":[0.35000000000000003,10,2.5,50,0.5,10,0,0.7,"Pivot SEGS","Combined mask"]},{"id":83,"type":"SEGSDetailerForAnimateDiff","pos":[1932,629],"size":{"0":386.92840576171875,"1":547.7892456054688},"flags":{},"order":55,"mode":0,"inputs":[{"name":"image_frames","type":"IMAGE","link":223,"slot_index":0},{"name":"segs","type":"SEGS","link":145},{"name":"basic_pipe","type":"BASIC_PIPE","link":163,"slot_index":2},{"name":"refiner_basic_pipe_opt","type":"BASIC_PIPE","link":null}],"outputs":[{"name":"segs","type":"SEGS","links":[146],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SEGSDetailerForAnimateDiff"},"widgets_values":[256,true,768,77777777777777,"fixed",20,7,"dpmpp_2m_sde_gpu","karras",0.35000000000000003,0.8]},{"id":71,"type":"LoadImage","pos":[-1040.389904227883,-1189.5011888805464],"size":{"0":544.8114013671875,"1":656.2537231445312},"flags":{},"order":15,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[243],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["Leonardo_Diffusion_XL_dramatic_sky_with_vibrant_colors_evoking_1 (1).jpg","image"]},{"id":166,"type":"CR String To Number","pos":[-1633.7622812086515,290.8010129866951],"size":{"0":315,"1":122},"flags":{},"order":16,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[321,322],"shape":3,"slot_index":0},{"name":"FLOAT","type":"FLOAT","links":null,"shape":3},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR String To Number"},"widgets_values":["1200","round"]},{"id":5,"type":"VHS_LoadVideo","pos":[-1668.7622812086515,-106.19898701330484],"size":[381.933837890625,218],"flags":{},"order":23,"mode":0,"inputs":[{"name":"frame_load_cap","type":"INT","link":321,"widget":{"name":"frame_load_cap"},"slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3],"shape":3,"slot_index":0},{"name":"frame_count","type":"INT","links":[],"shape":3,"slot_index":1},{"name":"audio","type":"VHS_AUDIO","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"3269085682197278647.mp4","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":700,"skip_first_frames":0,"select_every_nth":1,"choose video to upload":"image","videopreview":{"hidden":true,"paused":true,"params":{"filename":"0107.mp4","type":"input","format":"video/mp4","frame_load_cap":700,"skip_first_frames":0,"force_rate":0,"select_every_nth":1}}}},{"id":7,"type":"ImageScale","pos":[-486,-294],"size":{"0":346.09967041015625,"1":130},"flags":{},"order":26,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[201],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,960,"disabled"]},{"id":4,"type":"VAELoader","pos":[-1174.7622812086515,-95.19898701330489],"size":{"0":387.074462890625,"1":58},"flags":{},"order":17,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["vae-ft-mse-840000-ema-pruned.safetensors"]},{"id":21,"type":"Reroute","pos":[-538,-108],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":218,"slot_index":0}],"outputs":[{"name":"","type":"VAE","links":[24,67,166],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":92,"type":"VHS_VideoCombine","pos":[3364,-983],"size":[608.9914675937453,270],"flags":{},"order":53,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":304,"slot_index":0},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"title":"Video Save - After Faceswap","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"Animate_normal","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":20,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":true,"paused":true,"params":{"filename":"Animate_normal_00009.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}}},{"id":170,"type":"PreviewImage","pos":[1946,-757],"size":{"0":607.2425537109375,"1":521.8944702148438},"flags":{},"order":40,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":330}],"properties":{"Node name for S&R":"PreviewImage"}}],"links":[[1,2,0,1,1,"CONTEXT_OPTIONS"],[3,5,0,7,0,"IMAGE"],[7,8,0,12,0,"CONDITIONING"],[8,11,0,12,1,"CONDITIONING"],[21,18,0,17,3,"LATENT"],[24,21,0,18,1,"VAE"],[28,24,0,12,2,"CONTROL_NET"],[39,17,0,20,0,"LATENT"],[67,21,0,20,1,"VAE"],[74,48,1,8,0,"CLIP"],[75,48,1,11,0,"CLIP"],[79,48,0,50,0,"MODEL"],[84,52,0,53,2,"CONTROL_NET"],[107,64,0,8,1,"STRING"],[126,77,0,73,1,"IMAGE"],[136,70,0,80,1,"CLIP_VISION"],[138,69,0,80,0,"IPADAPTER"],[144,50,0,80,3,"MODEL"],[145,85,0,83,1,"SEGS"],[146,83,0,84,1,"SEGS"],[147,86,0,85,0,"BBOX_DETECTOR"],[148,87,0,85,2,"SAM_MODEL"],[162,20,0,88,0,"*"],[163,93,0,83,2,"BASIC_PIPE"],[166,21,0,93,2,"VAE"],[169,1,0,94,0,"*"],[170,94,0,17,0,"MODEL"],[171,94,0,93,0,"MODEL"],[176,95,0,17,1,"CONDITIONING"],[178,96,0,17,2,"CONDITIONING"],[181,96,0,93,4,"CONDITIONING"],[182,95,0,93,3,"CONDITIONING"],[185,97,0,53,3,"IMAGE"],[186,97,0,54,0,"IMAGE"],[190,19,0,18,0,"IMAGE"],[192,19,0,97,0,"IMAGE"],[194,3,1,99,0,"CLIP"],[196,99,0,93,1,"CLIP"],[201,7,0,19,0,"*"],[214,88,0,112,0,"IMAGE"],[217,19,0,14,0,"IMAGE"],[218,3,2,21,0,"*"],[219,84,0,90,0,"IMAGE"],[222,112,0,84,0,"IMAGE"],[223,112,0,83,0,"IMAGE"],[224,112,0,85,1,"IMAGE"],[243,71,0,125,0,"IMAGE"],[244,125,0,80,2,"IMAGE"],[268,99,0,48,1,"CLIP"],[277,14,0,26,0,"IMAGE"],[278,14,0,12,3,"IMAGE"],[286,12,0,53,0,"CONDITIONING"],[287,12,1,53,1,"CONDITIONING"],[288,3,0,48,0,"MODEL"],[304,88,0,92,0,"IMAGE"],[308,73,0,156,0,"IMAGE"],[309,157,0,158,0,"IPADAPTER"],[310,163,0,158,1,"CLIP_VISION"],[311,161,0,158,2,"INSIGHTFACE"],[312,162,0,158,3,"IMAGE"],[313,160,0,158,4,"MODEL"],[318,149,0,162,0,"IMAGE"],[321,166,0,5,0,"INT"],[322,166,0,8,2,"INT"],[323,169,0,167,2,"CONTROL_NET"],[326,19,0,171,0,"IMAGE"],[327,171,0,167,3,"IMAGE"],[328,53,0,167,0,"CONDITIONING"],[329,53,1,167,1,"CONDITIONING"],[330,171,0,170,0,"IMAGE"],[331,167,0,95,0,"*"],[332,167,1,96,0,"*"],[333,80,0,160,0,"MODEL"],[334,158,0,1,0,"MODEL"]],"groups":[{"title":"Animate Diff","bounding":[2686,-907,484,511],"color":"#b06634","font_size":24},{"title":"ControlNet (LineArt)","bounding":[103,-1368,843,1162],"color":"#8A8","font_size":24},{"title":"Prompts","bounding":[-50,52,511,1198],"color":"#b58b2a","font_size":24},{"title":"Loader","bounding":[-1741,-270,1053,769],"color":"#A88","font_size":24},{"title":"ControlNet (Openpose)","bounding":[1031,-1372,789,1175],"color":"#3f789e","font_size":24},{"title":"LCM (Optional)","bounding":[-636,13,472,475],"color":"#3f789e","font_size":24},{"title":"Regional IPAdapter (Optional For Video)","bounding":[-1100,-1340,1136,893],"color":"#8AA","font_size":24},{"title":"Faceswap (Optional)","bounding":[2945,131,1083,1133],"color":"#3f789e","font_size":24},{"title":"Detailer For Animation","bounding":[1459,132,1412,1129],"color":"#A88","font_size":24},{"title":"IPA - FaceID Plus V2","bounding":[-1113,-2202,1676,790],"color":"#3f789e","font_size":24},{"title":"ControlNet (Depth)","bounding":[1884,-1370,729,1173],"color":"#3f789e","font_size":24}],"config":{},"extra":{},"version":0.4}